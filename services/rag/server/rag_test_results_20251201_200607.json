{
  "timestamp": "20251201_200607",
  "summary": {
    "total_queries": 15,
    "reordered_count": 0,
    "avg_latency_no_rerank_ms": 1063.9483292897542,
    "avg_latency_with_rerank_ms": 1367.7571296691895,
    "rerank_overhead_ms": 303.8088003794353
  },
  "detailed_results": [
    {
      "query": "What port does the Gateway run on?",
      "category": "factual_retrieval",
      "expected_doc": "technical_architecture.pdf",
      "expected_answer": "port 8088",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1213.72389793396,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.21621332,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 1500.9827613830566,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.21624278,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "How does the RAG server handle embeddings?",
      "category": "technical_detail",
      "expected_doc": "technical_architecture.pdf",
      "expected_answer": "supports both OpenAI and local Sentence Transformers",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 597.2049236297607,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.2885778,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 813.7023448944092,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.28855023,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What is the maximum file size for uploads?",
      "category": "specification",
      "expected_doc": "product_features.pdf OR faq_document.pdf",
      "expected_answer": "50MB",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 642.2874927520752,
        "num_results": 10,
        "top_result": {
          "id": 8,
          "filename": "upload-e78b3df19b014900b1e2509814554e0e.txt",
          "chunk": "",
          "score": 0.34731388,
          "created_at": "2025-11-15T23:39:29.938493+00:00",
          "content_type": "text/plain",
          "size_bytes": 64,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 859.1058254241943,
        "num_results": 10,
        "top_result": {
          "id": 8,
          "filename": "upload-e78b3df19b014900b1e2509814554e0e.txt",
          "chunk": "",
          "score": 0.3472985,
          "created_at": "2025-11-15T23:39:29.938493+00:00",
          "content_type": "text/plain",
          "size_bytes": 64,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "Which database stores metadata?",
      "category": "architecture",
      "expected_doc": "technical_architecture.pdf",
      "expected_answer": "PostgreSQL",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 955.3501605987549,
        "num_results": 10,
        "top_result": {
          "id": 1,
          "filename": "tmpD5AE.tmp",
          "chunk": "",
          "score": 0.22085088,
          "created_at": "2025-11-15T22:58:20.820383+00:00",
          "content_type": "application/pdf",
          "size_bytes": 0,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 447.19862937927246,
        "num_results": 10,
        "top_result": {
          "id": 1,
          "filename": "tmpD5AE.tmp",
          "chunk": "",
          "score": 0.22087634,
          "created_at": "2025-11-15T22:58:20.820383+00:00",
          "content_type": "application/pdf",
          "size_bytes": 0,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What file formats are supported?",
      "category": "features",
      "expected_doc": "faq_document.pdf OR product_features.pdf",
      "expected_answer": "PDF, DOCX, DOC, TXT, MD, HTML, HTM",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1841.3450717926025,
        "num_results": 10,
        "top_result": {
          "id": 21,
          "filename": "faq_document.pdf",
          "chunk": "",
          "score": 0.34480524,
          "created_at": "2025-12-01T19:04:54.717046+00:00",
          "content_type": "application/pdf",
          "size_bytes": 3032,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 2271.944999694824,
        "num_results": 10,
        "top_result": {
          "id": 21,
          "filename": "faq_document.pdf",
          "chunk": "",
          "score": 0.34477717,
          "created_at": "2025-12-01T19:04:54.717046+00:00",
          "content_type": "application/pdf",
          "size_bytes": 3032,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "How do I upload a document?",
      "category": "procedural",
      "expected_doc": "user_guide.pdf",
      "expected_answer": "Click Upload button, select files, wait for completion",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 578.5019397735596,
        "num_results": 10,
        "top_result": {
          "id": 2,
          "filename": "upload.pdf",
          "chunk": "",
          "score": 0.46842372,
          "created_at": "2025-11-15T22:59:28.671365+00:00",
          "content_type": "application/pdf",
          "size_bytes": 1033672,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 595.3655242919922,
        "num_results": 10,
        "top_result": {
          "id": 2,
          "filename": "upload.pdf",
          "chunk": "",
          "score": 0.46840608,
          "created_at": "2025-11-15T22:59:28.671365+00:00",
          "content_type": "application/pdf",
          "size_bytes": 1033672,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "Can LotoAI work offline?",
      "category": "capability",
      "expected_doc": "faq_document.pdf OR product_features.pdf",
      "expected_answer": "Yes, with local embedding mode (EMBEDDING_PROVIDER=local)",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1645.8346843719482,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.2512867,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 4168.168306350708,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.2512867,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What is reranking and why is it useful?",
      "category": "concept",
      "expected_doc": "faq_document.pdf",
      "expected_answer": "Two-stage retrieval: fast vector search then cross-encoder reordering for better relevance",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 742.6609992980957,
        "num_results": 10,
        "top_result": {
          "id": 23,
          "filename": "research_paper.pdf",
          "chunk": "",
          "score": 0.15538073,
          "created_at": "2025-12-01T19:04:58.703898+00:00",
          "content_type": "application/pdf",
          "size_bytes": 5682,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 1156.6967964172363,
        "num_results": 10,
        "top_result": {
          "id": 23,
          "filename": "research_paper.pdf",
          "chunk": "",
          "score": 0.15538073,
          "created_at": "2025-12-01T19:04:58.703898+00:00",
          "content_type": "application/pdf",
          "size_bytes": 5682,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "Which embedding model performed best in the research?",
      "category": "research_finding",
      "expected_doc": "research_paper.pdf",
      "expected_answer": "OpenAI (MRR 0.945), followed by BGE-M3 (MRR 0.863)",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1756.6871643066406,
        "num_results": 10,
        "top_result": {
          "id": 23,
          "filename": "research_paper.pdf",
          "chunk": "",
          "score": 0.24994764,
          "created_at": "2025-12-01T19:04:58.703898+00:00",
          "content_type": "application/pdf",
          "size_bytes": 5682,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 1205.1293849945068,
        "num_results": 10,
        "top_result": {
          "id": 23,
          "filename": "research_paper.pdf",
          "chunk": "",
          "score": 0.24994516,
          "created_at": "2025-12-01T19:04:58.703898+00:00",
          "content_type": "application/pdf",
          "size_bytes": 5682,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What was the accuracy improvement from reranking?",
      "category": "quantitative",
      "expected_doc": "research_paper.pdf",
      "expected_answer": "15-20% or 15-18% improvement",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1215.808629989624,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.19089288,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 1726.3343334197998,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.19091196,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What chunking strategy gives best results?",
      "category": "methodology",
      "expected_doc": "research_paper.pdf",
      "expected_answer": "Unlimited chunking with 25% overlap",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 810.2309703826904,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.21735492,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 531.4490795135498,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.21735492,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "How many languages does BGE-M3 support?",
      "category": "specification",
      "expected_doc": "product_features.pdf",
      "expected_answer": "100+ languages",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1184.8349571228027,
        "num_results": 10,
        "top_result": {
          "id": 3,
          "filename": "BOCM-20251023-21.pdf",
          "chunk": "",
          "score": 0.23522219,
          "created_at": "2025-11-15T23:01:51.024523+00:00",
          "content_type": "application/pdf",
          "size_bytes": 93328,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 2253.911018371582,
        "num_results": 10,
        "top_result": {
          "id": 3,
          "filename": "BOCM-20251023-21.pdf",
          "chunk": "",
          "score": 0.23524661,
          "created_at": "2025-11-15T23:01:51.024523+00:00",
          "content_type": "application/pdf",
          "size_bytes": 93328,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What is the Agent Orchestrator's port?",
      "category": "factual_retrieval",
      "expected_doc": "technical_architecture.pdf",
      "expected_answer": "port 8090",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1049.5731830596924,
        "num_results": 10,
        "top_result": {
          "id": 3,
          "filename": "BOCM-20251023-21.pdf",
          "chunk": "",
          "score": 0.21802261,
          "created_at": "2025-11-15T23:01:51.024523+00:00",
          "content_type": "application/pdf",
          "size_bytes": 93328,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 1302.3641109466553,
        "num_results": 10,
        "top_result": {
          "id": 3,
          "filename": "BOCM-20251023-21.pdf",
          "chunk": "",
          "score": 0.21800378,
          "created_at": "2025-11-15T23:01:51.024523+00:00",
          "content_type": "application/pdf",
          "size_bytes": 93328,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "Tips for better search results",
      "category": "best_practices",
      "expected_doc": "user_guide.pdf",
      "expected_answer": "Be specific, use keywords, ask one thing at a time, check sources",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 1117.1932220458984,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.27076644,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 667.0148372650146,
        "num_results": 10,
        "top_result": {
          "id": 12,
          "filename": "chat-rag-test-549d4904a529453d907b0924d8c71828.txt",
          "chunk": "",
          "score": 0.26979804,
          "created_at": "2025-11-16T11:42:13.960907+00:00",
          "content_type": "text/plain",
          "size_bytes": 98,
          "name_match": true
        }
      },
      "order_changed": false
    },
    {
      "query": "What does the Gateway component do?",
      "category": "architecture",
      "expected_doc": "technical_architecture.pdf",
      "expected_answer": "Main entry point, routing, rate limiting, authentication, request validation",
      "without_rerank": {
        "mode": "vector",
        "elapsed_ms": 607.987642288208,
        "num_results": 10,
        "top_result": {
          "id": 24,
          "filename": "technical_architecture.pdf",
          "chunk": "",
          "score": 0.22220322,
          "created_at": "2025-12-01T19:05:01.364694+00:00",
          "content_type": "application/pdf",
          "size_bytes": 2753,
          "name_match": true
        }
      },
      "with_rerank": {
        "mode": "vector",
        "elapsed_ms": 1016.98899269104,
        "num_results": 10,
        "top_result": {
          "id": 24,
          "filename": "technical_architecture.pdf",
          "chunk": "",
          "score": 0.22220322,
          "created_at": "2025-12-01T19:05:01.364694+00:00",
          "content_type": "application/pdf",
          "size_bytes": 2753,
          "name_match": true
        }
      },
      "order_changed": false
    }
  ]
}